<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <script src="main.js"></script>
    <title>Elm + Tauri Counter</title>
</head>

<body>
    <div id="main"></div>
    <script type="module">
        const root = document.getElementById("main");
        const app = Elm.Main.init({ node: root, flags: {} });
        const ports = app.ports;
        const invoke = window.__TAURI__.invoke;

        ports.increment.subscribe(async (count) =>
            ports.updateCount.send(await invoke("increment", {
                current: count
            })));
        ports.decrement.subscribe(async (count) =>
            ports.updateCount.send(await invoke("decrement", {
                current: count
            })));
        ports.reset.subscribe(async () =>
            ports.updateCount.send(await invoke("reset")));
    </script>
</body>

</html>
